{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/asya/Desktop/crypto-list-app/src/actions/crypto.ts"],"sourcesContent":["'use server';\n\nimport { CryptoItem, CryptoItemInsert } from '@/types/supabase';\nimport { createClient } from '@supabase/supabase-js';\nimport { revalidatePath } from 'next/cache';\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n\nexport async function addCryptoItem(data: CryptoItemInsert) {\n  try {\n    const { data: insertedData, error } = await supabase\n      .from('crypto-item')\n      .insert(data)\n      .select()\n      .single();\n\n    if (error) throw error;\n    revalidatePath('/');\n    return { data: insertedData as CryptoItem, error: null };\n  } catch (error) {\n    if (error instanceof Error) {\n      console.error('Error inserting data:', error.message);\n      return { data: null, error: error.message };\n    }\n    return {\n      data: null,\n      error: 'Failed to add cryptocurrency. Please try again.',\n    };\n  }\n}\n\nexport async function getUserCryptoList(userId: string | null) {\n  try {\n    let query = supabase\n      .from('crypto-item')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (userId) {\n      query = query.eq('userId', userId);\n    }\n    const { data, error } = await query;\n    if (error) throw error;\n    return { data: data as CryptoItem[], error: null };\n  } catch (error) {\n    if (error instanceof Error) {\n      console.error('Error fetching data:', error.message);\n      return { data: null, error: error.message };\n    }\n    return { data: null, error: 'Failed to fetch cryptocurrency list.' };\n  }\n}\n\nexport async function editCryptoItem(\n  id: string,\n  data: Partial<CryptoItemInsert>\n) {\n  try {\n    const { data: updatedData, error } = await supabase\n      .from('crypto-item')\n      .update(data)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    revalidatePath('/');\n    return { data: updatedData as CryptoItem, error: null };\n  } catch (error) {\n    if (error instanceof Error) {\n      console.error('Error editing data:', error.message);\n      return { data: null, error: error.message };\n    }\n    return { data: null, error: 'Failed to edit list item' };\n  }\n}\n\nexport async function deleteCryptoItem(id: string) {\n  try {\n    const { error } = await supabase.from('crypto-item').delete().eq('id', id);\n    if (error) throw error;\n    revalidatePath('/');\n    return { data: true, error: null };\n  } catch (error) {\n    if (error instanceof Error) {\n      console.error('Error deleting item:', error.message);\n      return { data: null, error: error.message };\n    }\n    return { data: null, error: 'Failed to delete list item' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;IAWsB;IAuBA;IAsBA;IAwBA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///home/asya/Desktop/crypto-list-app/src/context/index.tsx"],"sourcesContent":["'use client';\nimport { CryptoItem } from '@/types/supabase';\nimport { createContext, Dispatch, FC, SetStateAction, useState } from 'react';\n\ntype MyContextType = {\n  selectedItem: CryptoItem | null;\n  setSelectedItem: Dispatch<SetStateAction<CryptoItem | null>>;\n};\n\nconst MyContext = createContext<MyContextType>({\n  selectedItem: null,\n  setSelectedItem: () => {},\n});\n\nexport const MyProvider: FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [selectedItem, setSelectedItem] = useState<CryptoItem | null>(null);\n\n  return (\n    <MyContext.Provider\n      value={{\n        selectedItem,\n        setSelectedItem,\n      }}\n    >\n      {children}\n    </MyContext.Provider>\n  );\n};\n\nexport default MyContext;\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AASA,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAiB;IAC7C,cAAc;IACd,iBAAiB,KAAO;AAC1B;AAEO,MAAM,aAAgD,CAAC,EAAE,QAAQ,EAAE;;IACxE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAqB;IAEpE,qBACE,6LAAC,UAAU,QAAQ;QACjB,OAAO;YACL;YACA;QACF;kBAEC;;;;;;AAGP;GAba;KAAA;uCAeE"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/asya/Desktop/crypto-list-app/src/components/CryptoForm/index.tsx"],"sourcesContent":["'use client';\nimport React, { useContext, useEffect } from 'react';\nimport { addCryptoItem, editCryptoItem } from '@/actions/crypto';\nimport { useForm } from 'react-hook-form';\nimport { useAuth } from '@clerk/nextjs';\nimport MyContext from '@/context';\n\ninterface FormValues {\n  cryptoName: string;\n  price: number;\n}\n\nexport default function CryptoForm() {\n  const { selectedItem, setSelectedItem } = useContext(MyContext);\n\n  const { userId } = useAuth();\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm<FormValues>({\n    defaultValues: {\n      cryptoName: '',\n      price: 0,\n    },\n  });\n\n  async function onSubmit(formData: FormValues) {\n    if (selectedItem) {\n      await editCryptoItem(String(selectedItem.id), {\n        name: formData.cryptoName,\n        price: formData.price,\n      });\n      setSelectedItem(null);\n    } else {\n      await addCryptoItem({\n        name: formData.cryptoName,\n        price: formData.price,\n        userId: userId ? userId : '',\n      });\n    }\n\n    reset();\n  }\n\n  useEffect(() => {\n    if (selectedItem) {\n      setValue('cryptoName', selectedItem.name || '');\n      setValue('price', selectedItem.price || 0);\n    }\n  }, [selectedItem, setValue]);\n\n  return (\n    <div className=\"flex justify-center items-center pt-10\">\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        className=\"bg-white p-6 rounded-lg shadow-md w-96\"\n      >\n        <h2 className=\"text-2xl font-bold mb-4 text-gray-800\">\n          {selectedItem ? 'Edit Crypto item' : 'Add Crypto'}\n        </h2>\n        <div className=\"mb-4\">\n          <label\n            htmlFor=\"cryptoName\"\n            className=\"block text-sm font-medium text-gray-700 mb-2\"\n          >\n            Crypto Name\n          </label>\n          <input\n            type=\"text\"\n            id=\"cryptoName\"\n            {...register('cryptoName', {\n              required: 'Crypto name is required',\n              maxLength: {\n                value: 50,\n                message: 'Crypto name must be less than 50 characters',\n              },\n            })}\n            className={`w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${\n              errors.cryptoName ? 'border-red-500' : 'border-gray-300'\n            }`}\n          />\n          {errors.cryptoName && (\n            <p className=\"text-red-500 text-sm mt-1\">\n              {errors.cryptoName.message}\n            </p>\n          )}\n        </div>\n\n        <div className=\"mb-4\">\n          <label\n            htmlFor=\"price\"\n            className=\"block text-sm font-medium text-gray-700 mb-2\"\n          >\n            Price (USD)\n          </label>\n          <input\n            type=\"number\"\n            id=\"price\"\n            {...register('price', {\n              required: 'Price is required',\n              min: {\n                value: 0,\n                message: 'Price must be a positive number',\n              },\n            })}\n            step=\"0.01\"\n            className={`w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${\n              errors.price ? 'border-red-500' : 'border-gray-300'\n            }`}\n          />\n          {errors.price && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.price.message}</p>\n          )}\n        </div>\n        <button\n          type=\"submit\"\n          className=\"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n        >\n          Submit\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAGA;AADA;AADA;;;AAHA;;;;;;AAYe,SAAS;;IACtB,MAAM,EAAE,YAAY,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,2HAAA,CAAA,UAAS;IAE9D,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qPAAA,CAAA,UAAO,AAAD;IACzB,MAAM,EACJ,QAAQ,EACR,YAAY,EACZ,KAAK,EACL,QAAQ,EACR,WAAW,EAAE,MAAM,EAAE,EACtB,GAAG,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAc;QACtB,eAAe;YACb,YAAY;YACZ,OAAO;QACT;IACF;IAEA,eAAe,SAAS,QAAoB;QAC1C,IAAI,cAAc;YAChB,MAAM,CAAA,GAAA,2HAAA,CAAA,iBAAc,AAAD,EAAE,OAAO,aAAa,EAAE,GAAG;gBAC5C,MAAM,SAAS,UAAU;gBACzB,OAAO,SAAS,KAAK;YACvB;YACA,gBAAgB;QAClB,OAAO;YACL,MAAM,CAAA,GAAA,2HAAA,CAAA,gBAAa,AAAD,EAAE;gBAClB,MAAM,SAAS,UAAU;gBACzB,OAAO,SAAS,KAAK;gBACrB,QAAQ,SAAS,SAAS;YAC5B;QACF;QAEA;IACF;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,cAAc;gBAChB,SAAS,cAAc,aAAa,IAAI,IAAI;gBAC5C,SAAS,SAAS,aAAa,KAAK,IAAI;YAC1C;QACF;+BAAG;QAAC;QAAc;KAAS;IAE3B,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,UAAU,aAAa;YACvB,WAAU;;8BAEV,6LAAC;oBAAG,WAAU;8BACX,eAAe,qBAAqB;;;;;;8BAEvC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAQ;4BACR,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,IAAG;4BACF,GAAG,SAAS,cAAc;gCACzB,UAAU;gCACV,WAAW;oCACT,OAAO;oCACP,SAAS;gCACX;4BACF,EAAE;4BACF,WAAW,CAAC,uHAAuH,EACjI,OAAO,UAAU,GAAG,mBAAmB,mBACvC;;;;;;wBAEH,OAAO,UAAU,kBAChB,6LAAC;4BAAE,WAAU;sCACV,OAAO,UAAU,CAAC,OAAO;;;;;;;;;;;;8BAKhC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAQ;4BACR,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,MAAK;4BACL,IAAG;4BACF,GAAG,SAAS,SAAS;gCACpB,UAAU;gCACV,KAAK;oCACH,OAAO;oCACP,SAAS;gCACX;4BACF,EAAE;4BACF,MAAK;4BACL,WAAW,CAAC,uHAAuH,EACjI,OAAO,KAAK,GAAG,mBAAmB,mBAClC;;;;;;wBAEH,OAAO,KAAK,kBACX,6LAAC;4BAAE,WAAU;sCAA6B,OAAO,KAAK,CAAC,OAAO;;;;;;;;;;;;8BAGlE,6LAAC;oBACC,MAAK;oBACL,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT;GAlHwB;;QAGH,qPAAA,CAAA,UAAO;QAOtB,iKAAA,CAAA,UAAO;;;KAVW"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///home/asya/Desktop/crypto-list-app/src/components/DeleteConfirmationModal/index.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\n\ninterface DeleteModalProps {\n  onClose: () => void;\n  onDelete: () => void;\n}\n\nexport default function DeleteModal({ onClose, onDelete }: DeleteModalProps) {\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"bg-white w-96 p-6 rounded-lg shadow-lg\">\n        <p className=\"text-lg text-gray-600 mt-2\">\n          Are you sure you want to delete this item?\n        </p>\n        <div className=\"flex justify-end space-x-4 mt-4\">\n          <button\n            className=\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-200 rounded-lg hover:bg-gray-300\"\n            onClick={onClose}\n          >\n            Cancel\n          </button>\n          <button\n            className=\"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600\"\n            onClick={onDelete}\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAQe,SAAS,YAAY,EAAE,OAAO,EAAE,QAAQ,EAAoB;IACzE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAG1C,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,WAAU;4BACV,SAAS;sCACV;;;;;;sCAGD,6LAAC;4BACC,WAAU;4BACV,SAAS;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAOX;KAxBwB"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///home/asya/Desktop/crypto-list-app/src/components/CryptoListItems/index.tsx"],"sourcesContent":["'use client';\nimport { useContext, useState } from 'react';\nimport { deleteCryptoItem } from '@/actions/crypto';\nimport { CryptoItem } from '@/types/supabase';\nimport { useAuth } from '@clerk/nextjs';\nimport DeleteModal from '../DeleteConfirmationModal';\nimport MyContext from '@/context';\n\nexport default function CryptoListItems({ items }: { items: CryptoItem[] }) {\n  const { userId } = useAuth();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedItemId, setSelectedItemId] = useState<string | null>(null);\n  const { setSelectedItem } = useContext(MyContext);\n\n  const handleDeleteClick = (id: string) => {\n    setSelectedItemId(id);\n    setIsModalOpen(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (selectedItemId) {\n      await deleteCryptoItem(selectedItemId);\n      setIsModalOpen(false);\n      setSelectedItemId(null);\n    }\n  };\n\n  return (\n    <>\n      <ul className=\"space-y-4 p-4 rounded-lg \">\n        {items.map((item) => (\n          <li\n            key={item.id}\n            className=\"flex justify-between items-center bg-white p-4 rounded-lg shadow hover:shadow-lg transition-shadow\"\n          >\n            <div className=\"flex gap-10 items-center\">\n              <p className=\"text-lg font-semibold text-gray-700\">{item.name}</p>\n              <p className=\"text-lg text-gray-500\">${item.price}</p>\n            </div>\n            {userId && (\n              <div className=\"flex space-x-2\">\n                <button\n                  className=\"px-3 py-1 text-sm text-white bg-blue-500 hover:bg-blue-600 rounded-md\"\n                  onClick={() => setSelectedItem(item)}\n                >\n                  Edit\n                </button>\n                <button\n                  className=\"px-3 py-1 text-sm text-white bg-red-500 hover:bg-red-600 rounded-md\"\n                  onClick={() => handleDeleteClick(String(item.id))}\n                >\n                  Delete\n                </button>\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n      {isModalOpen && (\n        <DeleteModal\n          onClose={() => setIsModalOpen(false)}\n          onDelete={handleDeleteConfirm}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAGA;AACA;AAFA;;;AAJA;;;;;;AAQe,SAAS,gBAAgB,EAAE,KAAK,EAA2B;;IACxE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qPAAA,CAAA,UAAO,AAAD;IACzB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACpE,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,2HAAA,CAAA,UAAS;IAEhD,MAAM,oBAAoB,CAAC;QACzB,kBAAkB;QAClB,eAAe;IACjB;IAEA,MAAM,sBAAsB;QAC1B,IAAI,gBAAgB;YAClB,MAAM,CAAA,GAAA,2HAAA,CAAA,mBAAgB,AAAD,EAAE;YACvB,eAAe;YACf,kBAAkB;QACpB;IACF;IAEA,qBACE;;0BACE,6LAAC;gBAAG,WAAU;0BACX,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;wBAEC,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAAuC,KAAK,IAAI;;;;;;kDAC7D,6LAAC;wCAAE,WAAU;;4CAAwB;4CAAE,KAAK,KAAK;;;;;;;;;;;;;4BAElD,wBACC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,WAAU;wCACV,SAAS,IAAM,gBAAgB;kDAChC;;;;;;kDAGD,6LAAC;wCACC,WAAU;wCACV,SAAS,IAAM,kBAAkB,OAAO,KAAK,EAAE;kDAChD;;;;;;;;;;;;;uBAlBA,KAAK,EAAE;;;;;;;;;;YA0BjB,6BACC,6LAAC,yJAAA,CAAA,UAAW;gBACV,SAAS,IAAM,eAAe;gBAC9B,UAAU;;;;;;;;AAKpB;GA1DwB;;QACH,qPAAA,CAAA,UAAO;;;KADJ"}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}